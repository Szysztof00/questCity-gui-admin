import{_ as U,o as n,c as r,b as e,w as c,v as u,F as p,r as g,t as d,g as _,n as m,p as f,h as y}from"./index-8d41fe80.js";const v={data(){return{users:JSON.parse(localStorage.getItem("users"))||[{id:1,name:"John Doe",email:"john@example.com"}],userModal:!1,modalType:"add",editedUser:{id:null,name:"",email:""},searchTerm:"",itemsPerPage:10,currentPage:1}},computed:{filteredUsers(){return this.users.filter(l=>l.name.toLowerCase().includes(this.searchTerm.toLowerCase())||l.email.toLowerCase().includes(this.searchTerm.toLowerCase()))},totalPages(){return Math.ceil(this.filteredUsers.length/this.itemsPerPage)},paginatedUsers(){const l=(this.currentPage-1)*this.itemsPerPage,s=l+this.itemsPerPage;return this.filteredUsers.slice(l,s)}},methods:{openUserModal(l,s=null){this.modalType=l,this.userModal=!0,l==="edit"&&s?this.editedUser={...s}:this.editedUser={id:null,name:"",email:""}},saveUser(){if(this.modalType==="add")this.users.push({...this.editedUser,id:this.users.length+1});else if(this.modalType==="edit"){const l=this.users.findIndex(s=>s.id===this.editedUser.id);l!==-1&&this.$set(this.users,l,{...this.editedUser})}localStorage.setItem("users",JSON.stringify(this.users)),this.closeUserModal()},deleteUser(l){const s=this.users.findIndex(h=>h.id===l);s!==-1&&this.users.splice(s,1),localStorage.setItem("users",JSON.stringify(this.users))},closeUserModal(){this.userModal=!1},resetSearch(){this.searchTerm=""},changePage(l){l>=1&&l<=this.totalPages&&(this.currentPage=l)}}},o=l=>(f("data-v-281eadfc"),l=l(),y(),l),P={class:"container mt-5"},C=o(()=>e("h1",{class:"mt-4"},"ZARZĄDZAJ UŻYTKOWNIKAMI",-1)),w={class:"text-center"},x={class:"input-group mt-3"},I={class:"input-group-append"},M={id:"dtBasicExample",class:"table table-striped table-bordered table-sm mt-3",cellspacing:"0",width:"100%"},S=o(()=>e("thead",{class:"thead-dark"},[e("tr",null,[e("th",{class:"th-sm"},"ID"),e("th",{class:"th-sm"},"Imię i nazwisko"),e("th",{class:"th-sm"},"Email"),e("th",{class:"th-sm"},"Akcje")])],-1)),T=["onClick"],j=["onClick"],D=o(()=>e("tfoot",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Imię i nazwisko"),e("th",null,"Email"),e("th",null,"Akcje")])],-1)),E={key:0,class:"user-modal-popup"},z={class:"card"},N={class:"card-header"},A={class:"mb-0"},J={class:"card-body"},L=o(()=>e("label",{for:"name"},"Imię i nazwisko:",-1)),V=o(()=>e("label",{for:"email"},"Email:",-1)),B={key:1},O={class:"pagination"},Z=["onClick"];function F(l,s,h,K,i,a){return n(),r("div",P,[C,e("div",w,[e("button",{onClick:s[0]||(s[0]=t=>a.openUserModal("add")),class:"btn btn-primary"},"Dodaj użytkownika"),e("div",x,[c(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>i.searchTerm=t),class:"form-control",placeholder:"Szukaj użytkownika..."},null,512),[[u,i.searchTerm]]),e("div",I,[e("button",{onClick:s[2]||(s[2]=(...t)=>a.resetSearch&&a.resetSearch(...t)),class:"btn btn-outline-secondary",type:"button"},"Resetuj")])]),e("table",M,[S,e("tbody",null,[(n(!0),r(p,null,g(a.paginatedUsers,(t,b)=>(n(),r("tr",{key:t.id},[e("td",null,d(t.id),1),e("td",null,d(t.name),1),e("td",null,d(t.email),1),e("td",null,[e("button",{onClick:k=>a.openUserModal("edit",t),class:"btn btn-sm btn-warning"},"Edytuj",8,T),e("button",{onClick:k=>a.deleteUser(t.id),class:"btn btn-sm btn-danger"},"Usuń",8,j)])]))),128))]),D]),i.userModal?(n(),r("div",E,[e("div",z,[e("div",N,[e("h2",A,d(i.modalType==="add"?"Dodaj użytkownika":"Edytuj użytkownika"),1)]),e("div",J,[L,c(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=t=>i.editedUser.name=t),id:"name",class:"form-control mb-2"},null,512),[[u,i.editedUser.name]]),V,c(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>i.editedUser.email=t),id:"email",class:"form-control mb-2"},null,512),[[u,i.editedUser.email]]),e("button",{onClick:s[5]||(s[5]=(...t)=>a.saveUser&&a.saveUser(...t)),class:"btn btn-success mr-2"},d(i.modalType==="add"?"Dodaj":"Zapisz"),1),e("button",{onClick:s[6]||(s[6]=(...t)=>a.closeUserModal&&a.closeUserModal(...t)),class:"btn btn-secondary"},"Anuluj")])])])):_("",!0),a.totalPages>1?(n(),r("nav",B,[e("ul",O,[e("li",{class:m(["page-item",{disabled:i.currentPage===1}])},[e("a",{class:"page-link",onClick:s[7]||(s[7]=t=>a.changePage(i.currentPage-1))},"Poprzednia")],2),(n(!0),r(p,null,g(a.totalPages,t=>(n(),r("li",{class:m(["page-item",{active:i.currentPage===t}]),key:t},[e("a",{class:"page-link",onClick:b=>a.changePage(t)},d(t),9,Z)],2))),128)),e("li",{class:m(["page-item",{disabled:i.currentPage===a.totalPages}])},[e("a",{class:"page-link",onClick:s[8]||(s[8]=t=>a.changePage(i.currentPage+1))},"Następna")],2)])])):_("",!0)])])}const W=U(v,[["render",F],["__scopeId","data-v-281eadfc"]]);export{W as default};
