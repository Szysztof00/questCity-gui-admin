import{_ as f,i as G,o as n,c as d,b as e,j as v,k as P,w as c,v as m,F as g,r as _,t as r,g as p,n as u,p as w,h as C}from"./index-8d41fe80.js";const x={data(){return{games:JSON.parse(localStorage.getItem("games"))||[],gameModal:!1,modalType:"add",editedGame:{id:null,name:"",email:""},searchTerm:"",itemsPerPage:10,currentPage:1}},computed:{filteredGames(){return this.games.filter(a=>a.title.toLowerCase().includes(this.searchTerm.toLowerCase()))},totalPages(){return Math.ceil(this.filteredGames.length/this.itemsPerPage)},paginatedGames(){const a=(this.currentPage-1)*this.itemsPerPage,t=a+this.itemsPerPage;return this.filteredGames.slice(a,t)}},methods:{openGameModal(a,t=null){this.modalType=a,this.gameModal=!0,a==="edit"&&t?this.editedGame={...t}:this.editedGame={id:null,name:"",email:""}},saveGame(){if(this.modalType==="add")this.games.push({...this.editedGame,id:this.games.length+1});else if(this.modalType==="edit"){const a=this.games.findIndex(t=>t.id===this.editedGame.id);a!==-1&&this.$set(this.games,a,{...this.editedGame})}localStorage.setItem("games",JSON.stringify(this.games)),this.closeGameModal()},deleteGame(a){const t=this.games.findIndex(h=>h.id===a);t!==-1&&this.games.splice(t,1),localStorage.setItem("games",JSON.stringify(this.games))},closeGameModal(){this.gameModal=!1},resetSearch(){this.searchTerm=""},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)}}},o=a=>(w("data-v-900847ee"),a=a(),C(),a),I={class:"container mt-5"},S=o(()=>e("h1",{class:"mt-4"},"ZARZĄDZAJ GRAMI MIEJSKIMI",-1)),M={class:"text-center"},T=o(()=>e("button",{class:"btn btn-primary"},"Stwórz nową grę miejską!",-1)),j={class:"input-group mt-3"},N={class:"input-group-append"},A={id:"dtBasicExample",class:"table table-striped table-bordered table-sm mt-3",cellspacing:"0",width:"100%"},z=o(()=>e("thead",{class:"thead-dark"},[e("tr",null,[e("th",{class:"th-sm"},"ID"),e("th",{class:"th-sm"},"Nazwa gry"),e("th",{class:"th-sm"},"Aktywność"),e("th",{class:"th-sm"},"Akcje")])],-1)),E={key:0},D={key:1},V=["onClick"],J=["onClick"],L=o(()=>e("tfoot",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nazwa gry"),e("th",null,"Aktywność"),e("th",null,"Akcje")])],-1)),R={key:0,class:"game-modal-popup"},B={class:"card"},U={class:"card-header"},Z={class:"mb-0"},O={class:"card-body"},F=o(()=>e("label",{for:"name"},"Imię i nazwisko:",-1)),K=o(()=>e("label",{for:"email"},"Email:",-1)),q={key:1},H={class:"pagination"},Q=["onClick"];function W(a,t,h,X,i,l){const b=G("RouterLink");return n(),d("div",I,[S,e("div",M,[v(b,{to:"/create"},{default:P(()=>[T]),_:1}),e("div",j,[c(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>i.searchTerm=s),class:"form-control",placeholder:"Szukaj użytkownika..."},null,512),[[m,i.searchTerm]]),e("div",N,[e("button",{onClick:t[1]||(t[1]=(...s)=>l.resetSearch&&l.resetSearch(...s)),class:"btn btn-outline-secondary",type:"button"},"Resetuj")])]),e("table",A,[z,e("tbody",null,[(n(!0),d(g,null,_(l.paginatedGames,(s,k)=>(n(),d("tr",{key:s.id},[e("td",null,r(s.id),1),e("td",null,r(s.title),1),s.active?(n(),d("td",E,"Aktywna")):(n(),d("td",D,"Nieaktywna")),e("td",null,[e("button",{onClick:y=>l.openGameModal("edit",s),class:"btn btn-sm btn-warning"},"Edytuj",8,V),e("button",{onClick:y=>l.deleteGame(s.id),class:"btn btn-sm btn-danger"},"Usuń",8,J)])]))),128))]),L]),i.gameModal?(n(),d("div",R,[e("div",B,[e("div",U,[e("h2",Z,r(i.modalType==="add"?"Dodaj grę":"Edytuj grę"),1)]),e("div",O,[F,c(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>i.editedGame.name=s),id:"name",class:"form-control mb-2"},null,512),[[m,i.editedGame.name]]),K,c(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>i.editedGame.email=s),id:"email",class:"form-control mb-2"},null,512),[[m,i.editedGame.email]]),e("button",{onClick:t[4]||(t[4]=(...s)=>l.saveGame&&l.saveGame(...s)),class:"btn btn-success mr-2"},r(i.modalType==="add"?"Dodaj":"Zapisz"),1),e("button",{onClick:t[5]||(t[5]=(...s)=>l.closeGameModal&&l.closeGameModal(...s)),class:"btn btn-secondary"},"Anuluj")])])])):p("",!0),l.totalPages>1?(n(),d("nav",q,[e("ul",H,[e("li",{class:u(["page-item",{disabled:i.currentPage===1}])},[e("a",{class:"page-link",onClick:t[6]||(t[6]=s=>l.changePage(i.currentPage-1))},"Poprzednia")],2),(n(!0),d(g,null,_(l.totalPages,s=>(n(),d("li",{class:u(["page-item",{active:i.currentPage===s}]),key:s},[e("a",{class:"page-link",onClick:k=>l.changePage(s)},r(s),9,Q)],2))),128)),e("li",{class:u(["page-item",{disabled:i.currentPage===l.totalPages}])},[e("a",{class:"page-link",onClick:t[7]||(t[7]=s=>l.changePage(i.currentPage+1))},"Następna")],2)])])):p("",!0)])])}const $=f(x,[["render",W],["__scopeId","data-v-900847ee"]]);export{$ as default};
